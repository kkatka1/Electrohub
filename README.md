# Electrohub — Электронная торговая сеть

## Описание проекта

**Electrohub** — это онлайн-платформа с API-интерфейсом и админ-панелью для управления иерархией поставщиков и продавцов электроники.

Проект реализует модель торговой сети с иерархией из трёх уровней:

- **Завод**
- **Розничная сеть**
- **Индивидуальный предприниматель**

Каждое звено связано только с одним поставщиком, и структура сети не может превышать трёх уровней вложенности. Также реализован учёт задолженности перед поставщиком и отображение продуктов, продаваемых звеном сети.

---

## Технологии

- **Python** 3.11+
- **Django** 5.2.3
- **Django REST Framework (DRF)**
- **PostgreSQL**
- **Swagger / Redoc** — документация API
- **JWT-аутентификация**
- **CORS headers**
- **PEP8 / Black / Flake8** — линтинг кода
- **`.env` конфигурации**

---

## Функционал

### Основное

- **Модель сети** с уровнями: `Завод`, `Розничная сеть`, `ИП`
- **Указание поставщика** и контроль допустимой цепочки поставок
- **Продукты и контакты** для каждого звена
- **Подсчёт задолженности** перед поставщиком
- **Автоматическое определение уровня** и даты создания

### Админ-панель

- **Просмотр элементов сети**
- **Фильтрация по городам**
- **Ссылка на поставщика**
- **Admin-action**: обнуление задолженности
- **Управление продуктами и контактами**

### API (DRF)

- **CRUD** для всех моделей
- **Фильтрация** по стране, городу, названию и уровню
- **Поиск и сортировка**
- **Права доступа** — только для **активных пользователей**
- **Пагинация**
- **Защита от редактирования задолженности** через API

### Документация

- [Swagger](http://localhost:8000/swagger/)
- [Redoc](http://localhost:8000/redoc/)

---

## Проверка кода

Проект соответствует стандартам стиля:

- `black`
- `flake8`
- `flake8-isort`
- `flake8-black`

---

## Установка и запуск

```bash
# Клонировать репозиторий
git clone https://github.com/your-username/electrohub.git
cd electrohub

# Создать и активировать виртуальное окружение
python3 -m venv .venv
source .venv/bin/activate

# Установить зависимости
pip install -r requirements.txt

# Настроить переменные окружения
cp .env.example .env
# затем отредактируйте .env и укажите свои значения

# Применить миграции
python manage.py migrate

# Создать суперпользователя (через кастомную команду)
python manage.py csu

# Запустить сервер
python manage.py runserver

###  Аутентификация

Для аутентификации используется JWT (JSON Web Tokens). Используется библиотека [Simple JWT](https://django-rest-framework-simplejwt.readthedocs.io/en/latest/).

#### Регистрация пользователя

`POST /[http://localhost:8000/register/]

**Пример запроса:**
```json
{
  "email": "user@example.com",
  "password": "yourpassword",  
}



Ограничения

    Через API запрещено редактировать поле debt.

    Цепочка поставщиков не должна превышать 3 уровня.

    Завод не имеет поставщиков.

    Пользователь должен быть активным для получения доступа к API.
